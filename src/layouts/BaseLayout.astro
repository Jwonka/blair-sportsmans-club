---
type Props = {
  title?: string;
  description?: string;
  canonicalPath?: string;
  ogImage?: string;
};

const {
  title = "Blair Sportsmen's Club",
  description = "Blair Sportsmen's Club — events, leagues, memberships, and The Barn event center.",
  canonicalPath = "/",
  ogImage = "/og/facebook-og-image-horizontal.jpg",
} = Astro.props;

const site = Astro.site?.toString().replace(/\/$/, "") ?? "";
const canonical = site ? `${site}${canonicalPath}` : canonicalPath;
const year = new Date().getFullYear();

const nav = [
  { href: "/", label: "Home" },
  { href: "/contact", label: "Contact Us" },
  { href: "/events", label: "Events" },
  { href: "/leagues", label: "Leagues" },
  { href: "/memberships", label: "Memberships" },
  { href: "/event-center", label: "Event Center" },
];

const orgJsonLd = {
  "@context": "https://schema.org",
  "@type": "SportsOrganization",
  name: "Blair Sportsmen's Club",
  url: site || undefined,
  logo: site ? `${site}/images/BSC_Logo_FC_v2.jpg` : "/images/BSC_Logo_FC_v2.jpg",
};
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="description" content={description} />
    <link rel="canonical" href={canonical} />
    <title>{title}</title>

    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonical} />
    <meta property="og:image" content={site ? `${site}${ogImage}` : ogImage} />
    <meta name="twitter:card" content="summary_large_image" />

    <meta name="theme-color" content="#263345" />
    <script type="application/ld+json">{JSON.stringify(orgJsonLd)}</script>
  </head>

  <body>
    <a class="skip-link" href="#main">Skip to main content</a>

    <header class="site-header">
      <div class="container header-inner">
        <a class="brand" href="/" aria-label="Blair Sportsmen's Club home">
          <img
            src="/images/logoIcon.jpg"
            alt="Blair Sportsmen's Club"
            loading="eager"
            decoding="async"
          />
        </a>

        <nav class="nav" aria-label="Primary">
          <ul class="nav-list">
            {nav.map((i) => (
              <li class="nav-item">
                <a class="nav-link" href={i.href}>{i.label}</a>
              </li>
            ))}
          </ul>
        </nav>
      </div>
    </header>

    <main id="main" class="site-main">
      <slot />
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <p class="fineprint">© {year} Blair Sportsmen's Club. All rights reserved.</p>
        <p class="fineprint">
          <a href="/contact">Contact</a>
          <span aria-hidden="true"> · </span>
          <a href="/memberships">Memberships</a>
          <span aria-hidden="true"> · </span>
          <a href="/event-center">Event Center</a>
        </p>
      </div>
    </footer>

    <style>
      :root{
        --bg:#FFFFFF;
        --bg-alt:#F3F3F3;
        --primary:#2C583D;
        --secondary:#9F9A75;
        --accent:#A63C3C;
        --text:#263345;
        --text-muted:#414141;
        --border:rgba(38,51,69,.18);
        --focus:#84A5CC;

        --radius:14px;
        --shadow:0 10px 30px rgba(38,51,69,.10);
        --max:1120px;
      }

      *{box-sizing:border-box}
      html:focus-within{scroll-behavior:smooth}
      @media (prefers-reduced-motion: reduce){
        html:focus-within{scroll-behavior:auto}
        *{animation-duration:.01ms!important; animation-iteration-count:1!important; transition-duration:.01ms!important}
      }

      body{
        margin:0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        color:var(--text);
        background:var(--bg);
        line-height:1.5;
        text-rendering:optimizeLegibility;
      }

      a{color:inherit}
      a:focus-visible{
        outline:3px solid var(--focus);
        outline-offset:3px;
        border-radius:10px;
      }

      .container{
        max-width:var(--max);
        margin:0 auto;
        padding-left:40px;
        padding-right:40px;
      }

      .skip-link{
        position:absolute; left:12px; top:12px;
        padding:10px 12px;
        background:var(--bg);
        border:1px solid var(--border);
        border-radius:10px;
        transform:translateY(-200%);
        z-index:999;
      }
      .skip-link:focus{transform:translateY(0)}

      .site-header{
        position:sticky; top:0; z-index:20;
        background:#263345;
        border-bottom:1px solid rgba(255,255,255,.14);
      }
      .header-inner{
        display:flex;
        align-items:center;
        justify-content:space-between;
        padding-top:16px;
        padding-bottom:16px;
        gap:20px;
      }
      .brand{
        display:inline-flex;
        align-items:center;
        text-decoration:none;
        flex-shrink:0;
        transition:opacity 0.2s ease;
      }
      .brand:hover{
        opacity:0.85;
      }
      .brand img{
        display:block;
        height:100px;
        width:auto;
      }

      .nav-list{
        display:flex;
        flex-wrap:wrap;
        gap:8px;
        list-style:none;
        margin:0;
        padding:0;
      }
      .nav-link{
        display:inline-block;
        padding:10px 14px;
        text-decoration:none;
        border-radius:10px;
        color:#fff;
        font-size:1.18rem;
        transition:background 0.2s ease, transform 0.2s ease;
      }
      .nav-link:hover{
        background:rgba(255,255,255,.12);
        transform:translateY(-1px);
      }

      .site-main{
        min-height:60vh;
        padding-top:52px;
        padding-left:18px;
        padding-right:18px;
      }

      .site-footer{
        margin-top:60px;
        background:#263345;
        color:#fff;
      }
      .footer-inner{
        padding:32px 0;
        display:flex;
        flex-direction:column;
        align-items:center;
        text-align:center;
        gap:8px;
      }
      .fineprint{
        margin:0;
        color:rgba(255,255,255,.88);
        font-size:0.9rem;
      }
      .fineprint a{
        color:inherit;
        transition:color 0.2s ease;
      }
      .fineprint a:hover{
        color:#84A5CC;
      }

      @media (max-width: 768px){
        .container{
          padding-left:28px;
          padding-right:28px;
        }
        .header-inner{
          padding-top:14px;
          padding-bottom:14px;
        }
        .nav-list{
          gap:6px;
        }
        .nav-link{
          padding:8px 10px;
          font-size:1.05rem;
        }
        .brand img{
          height:68px;
        }
        .site-main{
          padding-top:42px;
          padding-left:10px;
          padding-right:10px;
        }
      }

      @media (max-width: 480px){
        .container{
          padding-left:20px;
          padding-right:20px;
        }
        .header-inner{
          flex-direction:column;
          align-items:flex-start;
          padding-top:12px;
          padding-bottom:12px;
        }
        .nav-list{
          width:100%;
          justify-content:flex-start;
        }
        .brand img{
          height:60px;
        }
        .site-main{
          padding-top:34px;
          padding-left:10px;
          padding-right:10px;
        }
      }
    </style>
  </body>
</html>
